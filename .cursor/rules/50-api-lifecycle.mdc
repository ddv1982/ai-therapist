---
globs: src/app/api/**/*.ts
---
# API Endpoint Lifecycle

- Prefer deleting old endpoints rather than deprecating to keep codebase clean.
- When refactoring endpoints to middleware wrappers, preserve existing response
  shapes only where tests or external consumers require it. Otherwise, adopt
  standardized `ApiResponse<T>`.
- Update [`docs/api.yaml`](mdc:docs/api.yaml) and regenerate
  [`src/types/api.generated.ts`](mdc:src/types/api.generated.ts) via the
  `api:types` script whenever the contract changes.
- Ensure `X-Request-Id` headers are included and documented for traceability.

