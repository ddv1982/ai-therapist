#!/bin/sh

# Pre-push hook: Full verification before pushing to remote
# Runs qa:smoke (api:types + lint + tsc + jest), coverage, and e2e tests

echo "ğŸš€ Pre-push: Running full QA verification..."

# 1. Run smoke tests (api:types + lint + tsc + unit tests)
echo "ğŸ” Running smoke tests (lint, typecheck, unit tests)..."
CI=1 npm run qa:smoke || exit 1

# 2. Run test coverage
echo "ğŸ“Š Running test coverage..."
CI=1 npm run test:coverage || exit 1

# 3. Run e2e tests
echo "ğŸ­ Running end-to-end tests..."
CI=1 npm run test:e2e || exit 1

# 4. Verify build compiles successfully
echo "ğŸ—ï¸ Verifying production build..."
npm run build || exit 1

echo "âœ… Pre-push checks passed! Pushing to remote..."
